<?xml version="1.0"?>
<cd:ProductDefinition xmlns:cd="http://www.stcorp.nl/coda/definition/2008/07" id="MER_RR__1P_v0" format="binary" last-modified="2008-08-21">
  <cd:Record format="binary">
    <cd:Field name="mph">
      <cd:NamedType id="MPH"/>
    </cd:Field>
    <cd:Field name="sph">
      <cd:NamedType id="MER_RR__2P_SPH"/>
    </cd:Field>
    <cd:Field name="dsd">
      <cd:Array format="ascii">
        <cd:Dimension><![CDATA[$num_dsd]]></cd:Dimension>
        <cd:NamedType id="DSD"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Quality_ADS">
      <cd:Array>
        <cd:Description>Level 1b Summary Quality ADS (SQ ADS)</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[0]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_ADSR_sq_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Scaling_Factor_GADS">
      <cd:Array>
        <cd:Description>Level 1b GADS Scaling Factor and General  Info</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[1]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_GADS_sfgi_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Tie_points_ADS">
      <cd:Array>
        <cd:Description>Level 1b ADS Tie Point Location and Auxilliary Data (LADS)</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[2]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_ADSR_tie_pt_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_1">
      <cd:Array>
        <cd:Description>Level 1b MDS (1) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[3]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_2">
      <cd:Array>
        <cd:Description>Level 1b MDS (2) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[4]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_3">
      <cd:Array>
        <cd:Description>Level 1b MDS (3) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[5]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_4">
      <cd:Array>
        <cd:Description>Level 1b MDS (4) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[6]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_5">
      <cd:Array>
        <cd:Description>Level 1b MDS (5) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[7]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_6">
      <cd:Array>
        <cd:Description>Level 1b MDS (6) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[8]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_7">
      <cd:Array>
        <cd:Description>Level 1b MDS (7) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[9]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_8">
      <cd:Array>
        <cd:Description>Level 1b MDS (8) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[10]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_9">
      <cd:Array>
        <cd:Description>Level 1b MDS (9) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[11]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_10">
      <cd:Array>
        <cd:Description>Level 1b MDS (10) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[12]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_11">
      <cd:Array>
        <cd:Description>Level 1b MDS (11) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[13]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_12">
      <cd:Array>
        <cd:Description>Level 1b MDS (12) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[14]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_13">
      <cd:Array>
        <cd:Description>Level 1b MDS (13) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[15]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_14">
      <cd:Array>
        <cd:Description>Level 1b MDS (14) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[16]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Radiance_15">
      <cd:Array>
        <cd:Description>Level 1b MDS (15) TOA Radiance</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[17]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_1_15_meris_rec_data"/>
      </cd:Array>
    </cd:Field>
    <cd:Field name="Flags">
      <cd:Array>
        <cd:Description>Level 1b MDS (16) Flags and Detector Index</cd:Description>
        <cd:Dimension><![CDATA[$num_dsr[18]]]></cd:Dimension>
        <cd:NamedType id="MER_RR__1P_MDSR_16_meris_rec_data_v0"/>
      </cd:Array>
    </cd:Field>
  </cd:Record>
  <cd:ProductVariable name="sceneRasterWidth">
    <cd:Init><![CDATA[$sceneRasterWidth = int(/sph/line_length)]]></cd:Init>
  </cd:ProductVariable>
  <cd:ProductVariable name="tiePointGridWidth">
    <cd:Init><![CDATA[$tiePointGridWidth = int(/sph/line_length) / int(/sph/samples_per_tie_pt) + if((int(/sph/line_length) % int(/sph/samples_per_tie_pt)) == 0,0,1)]]></cd:Init>
  </cd:ProductVariable>
  <cd:ProductVariable name="num_dsd">
    <cd:Init><![CDATA[$num_dsd = int(/mph/num_dsd)]]></cd:Init>
  </cd:ProductVariable>
  <cd:ProductVariable name="num_ds">
    <cd:Init><![CDATA[$num_ds = 19]]></cd:Init>
  </cd:ProductVariable>
  <cd:ProductVariable name="ds_to_dsd_index">
    <cd:Dimension><![CDATA[$num_ds]]></cd:Dimension>
    <cd:Init><![CDATA[$ds_to_dsd_index[0] = index(/dsd, str(./ds_name) == "Quality ADS                 "); $ds_to_dsd_index[1] = index(/dsd, str(./ds_name) == "Scaling Factor GADS         "); $ds_to_dsd_index[2] = index(/dsd, str(./ds_name) == "Tie points ADS              "); $ds_to_dsd_index[3] = index(/dsd, str(./ds_name) == "Radiance MDS(1)             "); $ds_to_dsd_index[4] = index(/dsd, str(./ds_name) == "Radiance MDS(2)             "); $ds_to_dsd_index[5] = index(/dsd, str(./ds_name) == "Radiance MDS(3)             "); $ds_to_dsd_index[6] = index(/dsd, str(./ds_name) == "Radiance MDS(4)             "); $ds_to_dsd_index[7] = index(/dsd, str(./ds_name) == "Radiance MDS(5)             "); $ds_to_dsd_index[8] = index(/dsd, str(./ds_name) == "Radiance MDS(6)             "); $ds_to_dsd_index[9] = index(/dsd, str(./ds_name) == "Radiance MDS(7)             "); $ds_to_dsd_index[10] = index(/dsd, str(./ds_name) == "Radiance MDS(8)             "); $ds_to_dsd_index[11] = index(/dsd, str(./ds_name) == "Radiance MDS(9)             "); $ds_to_dsd_index[12] = index(/dsd, str(./ds_name) == "Radiance MDS(10)            "); $ds_to_dsd_index[13] = index(/dsd, str(./ds_name) == "Radiance MDS(11)            "); $ds_to_dsd_index[14] = index(/dsd, str(./ds_name) == "Radiance MDS(12)            "); $ds_to_dsd_index[15] = index(/dsd, str(./ds_name) == "Radiance MDS(13)            "); $ds_to_dsd_index[16] = index(/dsd, str(./ds_name) == "Radiance MDS(14)            "); $ds_to_dsd_index[17] = index(/dsd, str(./ds_name) == "Radiance MDS(15)            "); $ds_to_dsd_index[18] = index(/dsd, str(./ds_name) == "Flags MDS(16)               ")]]></cd:Init>
  </cd:ProductVariable>
  <cd:ProductVariable name="ds_available">
    <cd:Dimension><![CDATA[$num_ds]]></cd:Dimension>
    <cd:Init><![CDATA[for i = 0 to $num_ds - 1 do $ds_available[i] = if($ds_to_dsd_index[i] != -1 && !(bytes(/dsd[$ds_to_dsd_index[i]]/filename, 8) == "NOT USED"), 1, 0)]]></cd:Init>
  </cd:ProductVariable>
  <cd:ProductVariable name="ds_offset">
    <cd:Dimension><![CDATA[$num_ds]]></cd:Dimension>
    <cd:Init><![CDATA[for i = 0 to $num_ds - 1 do $ds_offset[i] = 8 * int(/dsd[$ds_to_dsd_index[i]]/ds_offset)]]></cd:Init>
  </cd:ProductVariable>
  <cd:ProductVariable name="num_dsr">
    <cd:Dimension><![CDATA[$num_ds]]></cd:Dimension>
    <cd:Init><![CDATA[for i = 0 to $num_ds - 1 do $num_dsr[i] = int(/dsd[$ds_to_dsd_index[i]]/num_dsr)]]></cd:Init>
  </cd:ProductVariable>
</cd:ProductDefinition>
